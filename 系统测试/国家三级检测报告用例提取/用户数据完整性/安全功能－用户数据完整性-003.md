# 安全功能－用户数据完整性-003

## 描述

当检测到文件完整性被破坏时，可以进行修复退回

## 预置条件

## 测试步骤

1.(1 ) 用户intuser1登陆并执行

```echo intuser1 > /tmp/intfile2
vi /tmp/intfile2 (把intuser１内容删除，但未保存)
```

（２）在另一个tty系统管理员登陆强制中断vi进程

```su -
pkill vi
(3) 用户ｉｎｆｕｓｅｒ１查看文件　cat/tmp/intfile2
```

2.系统管理员登陆修改用户ｉｎｆｕｓｅｒ１的密码

```su -
passwd intuser1
```

输入与原密码不一样的新密码,但需要输入第二次新密码确认时，ctrl+c　中断passwd进程，intuser1分别用新旧密码登陆

## 预期结果

1.　（3）现实ｉｎｆｕｓｅｒ１，意外中断编辑紧凑，回退到初始状态，保证原始数据的完整性

2.　新密码登陆失败，旧密码登陆成功，保障用户数据库完整性

## 备注